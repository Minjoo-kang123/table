<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Table</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <style>
        table {
            width: 1000px;
            margin: 0 auto;
        }

        table,
        td,
        th {
            border: 1px solid black;
            border-collapse: collapse;
        }

        ;

        tr {
            height: 20px;
        }

        td {
            width: 60px;
        }

        div {
            margin: 0 auto;
            text-align: center;
        }
    </style>
</head>

<body>
    <div>
        <br>
        <button id='add_row'>행 추가</button>
        <button id='del_row'>행 삭제</button>
        <button id='add_cell'>셀 추가</button>
        <br><br>
        <hr>
        <table id="mytable">
            <thead>
                <tr>
                    <th colspan=100>표</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <!-- 전체적인 접근, 선택, 추가는 javaScript 함수를 이용하지 않고 jQuery를 이용함
        내부의 colspan 계산은 javaScript 이용-->
    <script src="//code.jquery.com/jquery.min.js"></script>
    <script>
        var num_col = 100;
        $('#add_row').click(function () {
            $('#mytable > tbody:last').append('<tr><td colspan = ' + num_col + '>' + '<input type = "checkbox" name = "ch_box">' + '</td></tr>');
        });
        $('#del_row').click(function () {
            $('#mytable > tbody > tr:last').remove();
        });
        /* 다수의 셀 동시 분할을 위해서 each 이용 현재 코드 내에서 100개 분할이 가능
            그러나 해당 100개 분할은 순서대로 모든 셀을 선택한 뒤 가능함
            >> 셀 분할에 대한 제한이 생김
        */
        $('#add_cell').click(function () {
            $("input:checkbox[name='ch_box']:checked").each(function (k, kVal) {
                /* 체크박스의 부모 엘리먼트를 통해 선택한 셀에 접근
                    이후 해당 셀의 colspan 값을 통해 셀 추가후 colspan 값을 나누어 가지는 것으로 분할로 보이도록 할 예정 */
                var cell = kVal.parentElement;
                var col_idx1 = $(cell).attr('colspan');
                var col_idx2 = col_idx1;
                if (col_idx1 >= 2) {
                    if (col_idx1 % 2 == 1) {
                        col_idx1 = parseInt(col_idx1 / 2) + 1;
                        col_idx2 = parseInt(col_idx2 / 2);
                    } else {
                        col_idx1 = col_idx1 / 2;
                        col_idx2 = col_idx2 / 2;
                    }
                    $(cell).attr('colspan', col_idx1);
                    $(cell).after('<td colspan = ' + col_idx2 + '>' + '<input type = "checkbox"  name = "ch_box">' + '</td>');
                }
            });
        });
    </script>
</body>

</html>
